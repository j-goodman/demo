{"version":3,"sources":["webpack:///webpack/bootstrap 6965513817fbc0609ec1","webpack:///./js/game.js","webpack:///./js/objects/player.js","webpack:///./js/sprite.js","webpack:///./js/util.js","webpack:///./js/boxes/objects.js","webpack:///./js/objects/cursor.js","webpack:///./js/objects/view.js","webpack:///./js/controller.js","webpack:///./js/objects/bullet.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,8CAA6C,YAAY;AACzD,QAAO;;AAEP;;AAEA,MAAK;AACL;;AAEA;AACA;;AAEA;AACA;;;;;;;AC7EA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;;AAEA;;;;;;;AC/FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC7DA;AACA;AACA;AACA,IAAG;AACH;;AAEA;;;;;;;ACNA;;AAEA;;;;;;;ACFA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;;;;;;;AChBA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC9CA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 6965513817fbc0609ec1\n **/","console.log(\"Now it begins.\");\n\nWindow.newGame = function () {\n  var Player = require('./objects/player.js');\n  var Cursor = require('./objects/cursor.js');\n  var View = require('./objects/view.js');\n  var controller = require('./controller.js');\n  var mouseEvents = require('./controller.js');\n  // every object has a .run() function, a .sprite, and a .pos\n\n  var Util = require('./util.js');\n\n  var Game = {};\n\n  Game.startCanvas = function () {\n    window.onload = function () {\n      var canvas = document.getElementById(\"canvas\");\n      var ctx = canvas.getContext('2d');\n      this.canvas = canvas;\n      this.ctx = ctx;\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n    }.bind(this);\n  };\n\n  Game.connectController = function () {\n    controller(document, Player);\n  };\n\n  Game.setView = function () {\n    var view = new View (0, 0, 780, 480, 780, 480);\n    this.view = view;\n  };\n\n  Game.play = function () {\n    Game.startCanvas();\n    Game.connectController();\n    Game.setView();\n\n    if (this.interval) {\n      clearInterval(this.interval);\n    }\n\n    this.objects = require('./boxes/objects.js');\n\n    document.onmousemove = function (e) {\n      cursorX = e.pageX;\n      cursorY = e.pageY;\n      Cursor.pos.x = cursorX-50;\n      Cursor.pos.y = cursorY-56;\n    }.bind(this);\n\n    Player.cursor = Cursor;\n\n    this.objects.push(Player);\n    this.objects.push(Cursor);\n\n    this.interval = setInterval(function () {\n      var ctx = this.ctx;\n      if (ctx) {\n        this.ctx.fillStyle = \"black\";\n        this.ctx.fillRect(0, 0, canvas.width, canvas.height);\n      }\n\n      this.objects.forEach( function (object) {\n        object.run();\n        object.sprite.draw(ctx, object.pos, {x: 0, y: 0,});\n      } );\n\n      this.view.recenter(Player.pos);\n\n    }.bind(this), 30);\n  };\n\n  return Game;\n};\n\nvar game = Window.newGame();\ngame.play();\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/game.js\n ** module id = 0\n ** module chunks = 0\n **/","var Bullet = require('./bullet');\nvar objects = require('../boxes/objects.js');\nvar Sprite = require('../sprite.js');\nvar Util = require('../util.js');\n\nvar player = {\n  accel: 0.5,\n  angle: 0,\n  cooldown: 30,\n  cursor: undefined, // defined in game.js\n  maxSpeed: 4,\n  pos: {\n    x: 400,\n    y: 240,\n  },\n  objects: objects,\n  speed: {\n    x: 0,\n    y: 0,\n  },\n  sprite: (new Sprite(32, 32, 0, [\n    \"player.gif\",\n  ])),\n\n  brake: function () {\n    this.speed.x *= this.speed.x !== 0 ? 0.8 : 1;\n    this.speed.y *= this.speed.y !== 0 ? 0.8 : 1;\n  },\n\n  fire: function () {\n    if (!this.cooldown) {\n      objects.push(new Bullet (this.pos, this.cursor));\n      this.cooldown = 30;\n    }\n  },\n\n  goBack: function () {\n    this.speed.x += this.accel * Math.cos((this.angle+180) * Math.PI/180);\n    this.speed.y += this.accel * Math.sin((this.angle+180) * Math.PI/180);\n    if (Math.sqrt(this.speed.x*this.speed.x + this.speed.y*this.speed.y) > this.maxSpeed) {\n      this.speed.x *= 0.9;\n      this.speed.y *= 0.9;\n    }\n  },\n\n  goForwards: function () {\n    this.speed.x += this.accel * Math.cos(this.angle * Math.PI/180);\n    this.speed.y += this.accel * Math.sin(this.angle * Math.PI/180);\n    if (Math.sqrt(this.speed.x*this.speed.x + this.speed.y*this.speed.y) > this.maxSpeed) {\n      this.speed.x *= 0.9;\n      this.speed.y *= 0.9;\n    }\n  },\n\n  goLeft: function () {\n    this.speed.x += this.accel * Math.cos((this.angle-90) * Math.PI/180);\n    this.speed.y += this.accel * Math.sin((this.angle-90) * Math.PI/180);\n    if (Math.sqrt(this.speed.x*this.speed.x + this.speed.y*this.speed.y) > this.maxSpeed) {\n      this.speed.x *= 0.9;\n      this.speed.y *= 0.9;\n    }\n  },\n\n  goRight: function () {\n    this.speed.x += this.accel * Math.cos((this.angle+90) * Math.PI/180);\n    this.speed.y += this.accel * Math.sin((this.angle+90) * Math.PI/180);\n    if (Math.sqrt(this.speed.x*this.speed.x + this.speed.y*this.speed.y) > this.maxSpeed) {\n      this.speed.x *= 0.9;\n      this.speed.y *= 0.9;\n    }\n  },\n\n  run: function () {\n    this.angle = (Util.getAngle(this.pos, this.cursor.pos) * 180/Math.PI);\n    this.sprite.angle = this.angle;\n    this.pos.x += this.speed.x;\n    this.pos.y += this.speed.y;\n    if (this.runningForwards) {\n      this.goForwards();\n    } else if (this.runningRight) {\n      this.goRight();\n    } else if (this.runningLeft) {\n      this.goLeft();\n    } else if (this.runningBack) {\n      this.goBack();\n    } else {\n      this.brake();\n    }\n    if (this.cooldown > 0) {\n      this.cooldown -= 1;\n    }\n  },\n\n};\n\nmodule.exports = player;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/objects/player.js\n ** module id = 1\n ** module chunks = 0\n **/","var Sprite = function (width, height, rate, sourcePathArray) {\n  this.frames = [];\n  this.width = width;\n  this.height = height;\n  this.rate = 0;\n  this.rateMax = rate;\n  this.angle = 0;\n  sourcePathArray.forEach(function (path, index) {\n    this.frames[index] = new Image (width, height);\n    this.frames[index].src = \"./sprites/\"+path;\n  }.bind(this));\n  this.endCallback = null;\n};\n\nSprite.prototype.frame = 0;\n\nSprite.prototype.addAnimationEndCallback = function (callback) {\n  this.endCallback = function () {\n    callback();\n    this.endCallback = null;\n  }.bind(this);\n};\n\nSprite.prototype.animate = function () {\n  if (this.frames.length > 1) {\n    if (this.rate === 0) {\n        this.frame++;\n        if (this.frame === this.frames.length) {\n          this.frame = 0;\n          if (this.endCallback) {\n            this.endCallback();\n          }\n        }\n    }\n    this.rate -= 1;\n    if (this.rate < 0) {\n      this.rate = this.rateMax;\n    }\n  }\n};\n\nSprite.prototype.draw = function (ctx, pos, viewAnchor) {\n  if (ctx) {\n      ctx.save();\n      ctx.translate(pos.x, pos.y);\n      ctx.rotate((this.angle+90)*Math.PI/180);\n      ctx.translate(-this.width/2, -this.height/2);\n      ctx.drawImage(\n        this.frames[this.frame],\n        0-viewAnchor.x,\n        0-viewAnchor.y,\n        this.width,\n        this.height\n      );\n      ctx.restore();\n    if (this.rate) {\n      this.animate();\n    }\n  }\n};\n\nmodule.exports = Sprite;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/sprite.js\n ** module id = 2\n ** module chunks = 0\n **/","util = {\n  getAngle: function (posA, posB) {\n    return Math.atan2(posB.y - posA.y, posB.x - posA.x);\n  },\n};\n\nmodule.exports = util;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/util.js\n ** module id = 3\n ** module chunks = 0\n **/","var objects = [];\n\nmodule.exports = objects;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/boxes/objects.js\n ** module id = 4\n ** module chunks = 0\n **/","var Sprite = require('../sprite.js');\nvar objects = require('../boxes/objects.js');\n\nvar cursor = {\n  pos: {\n    x: 90,\n    y: 90,\n  },\n  run: function () {\n    // do nothing\n  },\n  sprite: (new Sprite(32, 32, 0, [\n    \"crosshairs.gif\",\n  ])),\n};\n\nmodule.exports = cursor;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/objects/cursor.js\n ** module id = 5\n ** module chunks = 0\n **/","var View = function (topLeftX, topLeftY, bottomRightX, bottomRightY, maxX, maxY) {\n  this.topLeftPos = {x: topLeftX, y: topLeftY};\n  this.centerPos = {\n    x: ((topLeftX + bottomRightX)/2),\n    y: ((topLeftY + bottomRightY)/2),\n  };\n  this.width = bottomRightX-topLeftX;\n  this.height = bottomRightY-topLeftY;\n  this.maxX = maxX;\n  this.maxY = maxY;\n};\n\nView.prototype.recenter = function (centerPos) {\n  this.topLeftPos.x = centerPos.x-this.width/2;\n  if (this.topLeftPos.x+this.width > this.maxX) {\n    this.topLeftPos.x = this.maxX-this.width;\n  }\n  if (this.topLeftPos.y+this.height > this.maxY) {\n    this.topLeftPos.y = this.maxY-this.height;\n  }\n  if (this.topLeftPos.x < 0) {\n    this.topLeftPos.x = 0;\n  }\n  if (this.topLeftPos.y < 0) {\n    this.topLeftPos.y = 0;\n  }\n};\n\nmodule.exports = View;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/objects/view.js\n ** module id = 6\n ** module chunks = 0\n **/","var controller = function (document, player) {\n  document.onkeydown = function (e) {\n    switch(e.keyCode) {\n    case 68: // d\n    case 39: //right\n      player.runningRight = true;\n      break;\n    case 65: // a\n    case 37: //left\n      player.runningLeft = true;\n      break;\n    case 87: // w\n    case 38: //up\n      player.runningForwards = true;\n      break;\n    case 83: // s\n    case 40: //down\n      player.runningBack = true;\n      break;\n    case 32: //space\n      player.fire();\n      break;\n    }\n  };\n  document.onkeyup = function (e) {\n    switch(e.keyCode) {\n      case 87: // w\n      case 38: //up\n        player.runningForwards = false;\n        break;\n      case 68: // d\n      case 39: //right\n        player.runningRight = false;\n        break;\n      case 65: // a\n      case 37: //left\n        player.runningLeft = false;\n        break;\n      case 83: // s\n      case 40: //down\n        player.runningBack = false;\n        break;\n    }\n  };\n};\n\nmodule.exports = controller;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/controller.js\n ** module id = 7\n ** module chunks = 0\n **/","var Sprite = require('../sprite.js');\nvar Util = require('../util.js');\nvar objects = require('../boxes/objects.js');\n\nvar Bullet = function (pos, cursor) {\n  this.pos = {\n    x: pos.x,\n    y: pos.y,\n  };\n  this.angle = (Util.getAngle(this.pos, cursor.pos) * 180/Math.PI);\n  this.sprite = (new Sprite(6, 6, 0, [\n    \"bullet.gif\",\n  ]));\n  this.power = 9;\n  this.speed = {\n    x: this.power * Math.cos(this.angle * Math.PI/180),\n    y: this.power * Math.sin(this.angle * Math.PI/180),\n  };\n};\n\nBullet.prototype.run = function () {\n  this.sprite.angle = this.angle;\n  this.pos.x += this.speed.x;\n  this.pos.y += this.speed.y;\n};\n\nmodule.exports = Bullet;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/objects/bullet.js\n ** module id = 8\n ** module chunks = 0\n **/"],"sourceRoot":""}